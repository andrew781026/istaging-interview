"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[189],{189:function(e,t,o){o.r(t),o.d(t,{default:function(){return P}});var a=o(3396),r=o(9242);const s={class:"list"},n={class:"book-list"},i={class:"load-more",ref:"loadMore"},c=(0,a.Uk)("LOAD MORE");function l(e,t,o,l,u,d){const b=(0,a.up)("Card"),p=(0,a.up)("PrimaryButton");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",n,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.bookList,(t=>((0,a.wg)(),(0,a.j4)(b,{key:t.isbn,book:t,onClick:o=>e.viewDetail(t)},null,8,["book","onClick"])))),128))]),(0,a.wy)((0,a._)("div",i,[(0,a.Wm)(p,{type:"primary",onClick:e.getMoreBooks},{default:(0,a.w5)((()=>[c])),_:1},8,["onClick"])],512),[[r.F8,e.canLoadMore]])])}var u=o(7139);const d={class:"card"},b={class:"info"},p=["title"],m=["title"];function k(e,t,o,r,s,n){const i=(0,a.up)("LazyImage");return(0,a.wg)(),(0,a.iD)("div",d,[(0,a.Wm)(i,{isbn:e.book.isbn},null,8,["isbn"]),(0,a._)("div",b,[(0,a._)("h3",{class:"title",title:e.book.title},(0,u.zw)(e.book.title),9,p),(0,a._)("h4",{class:"author",title:e.book.author},(0,u.zw)(e.book.author),9,m)])])}const g=["data-src"];function v(e,t,o,r,s,n){return(0,a.wg)(),(0,a.iD)("img",{ref:"imageRef",src:"https://fakeimg.pl/800x600/","data-src":`https://picsum.photos/800/600/?random=${o.isbn}`,alt:"圖片"},null,8,g)}var f=o(4870);const w=new IntersectionObserver((e=>{e.forEach((e=>{if(e.target instanceof HTMLImageElement){const t=e.isIntersecting,o=e.target.dataset.src,a=e.target.dataset.isReal,r=t&&o&&!a;r&&(e.target.src=o,e.target.dataset.isReal="true")}}))})),h=e=>((0,a.bv)((()=>{w.observe(e.value)})),(0,a.Jd)((()=>{w.unobserve(e.value)})),w);var C={name:"LazyImage",props:{isbn:String},setup(){const e=(0,f.iH)(new Image);return h(e),{imageRef:e}}},L=o(89);const _=(0,L.Z)(C,[["render",v]]);var y=_,I=(0,a.aZ)({name:"PureCard",props:{book:Object},components:{LazyImage:y}});const M=(0,L.Z)(I,[["render",k],["__scopeId","data-v-46b28748"]]);var D=M,Z=o(7687),R=o(6541),z=(0,a.aZ)({name:"ListView",setup(){return(0,R.CQ)(),{observer:R.Pi,canLoadMore:R.DK,loadMore:R.nR,bookList:R.ZN,page:R.Md}},components:{Card:D,PrimaryButton:Z.Z},methods:{getMoreBooks:R.cB,viewDetail(e){(0,R.xP)(e),this.$router.push({name:"detail",params:{id:e["@id"].replace("/books/","")}})}}});const B=(0,L.Z)(z,[["render",l],["__scopeId","data-v-31b253f2"]]);var P=B}}]);
//# sourceMappingURL=189.8d1d0981.js.map