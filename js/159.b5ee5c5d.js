"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[159],{7159:function(t,e,o){o.r(e),o.d(e,{default:function(){return O}});var a=o(3396),r=o(9242);const s={class:"list"},n={class:"book-list"},i={class:"load-more",ref:"loadMore"},c=(0,a.Uk)("LOAD MORE");function l(t,e,o,l,u,d){const b=(0,a.up)("Card"),g=(0,a.up)("PrimaryButton");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",n,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.bookList,(e=>((0,a.wg)(),(0,a.j4)(b,{key:e.isbn,book:e,onClick:o=>t.viewDetail(e)},null,8,["book","onClick"])))),128))]),(0,a.wy)((0,a._)("div",i,[(0,a.Wm)(g,{type:"primary",onClick:t.getMoreBooks},{default:(0,a.w5)((()=>[c])),_:1},8,["onClick"])],512),[[r.F8,t.canLoadMore]])])}var u=o(7139);const d={class:"card"},b={class:"info"},g=["title"],k=["title"];function p(t,e,o,r,s,n){const i=(0,a.up)("LazyImage");return(0,a.wg)(),(0,a.iD)("div",d,[(0,a.Wm)(i,{isbn:t.book.isbn},null,8,["isbn"]),(0,a._)("div",b,[(0,a._)("h3",{class:"title",title:t.book.title},(0,u.zw)(t.book.title),9,g),(0,a._)("h4",{class:"author",title:t.book.author},(0,u.zw)(t.book.author),9,k)])])}const m=["data-src"];function v(t,e,o,r,s,n){return(0,a.wg)(),(0,a.iD)("img",{ref:"imageRef",src:"https://fakeimg.pl/800x600/","data-src":`https://picsum.photos/800/600/?random=${o.isbn}`,alt:"圖片"},null,8,m)}var f=o(4870);const w=new IntersectionObserver((t=>{t.forEach((t=>{if(t.target instanceof HTMLImageElement){const e=t.isIntersecting,o=t.target.dataset.src,a=t.target.dataset.isReal,r=e&&o&&!a;r&&(t.target.src=o,t.target.dataset.isReal="true")}}))})),h=t=>((0,a.bv)((()=>{w.observe(t.value)})),(0,a.Jd)((()=>{w.unobserve(t.value)})),w);var C={name:"LazyImage",props:{isbn:String},setup(){const t=(0,f.iH)(new Image);return h(t),{imageRef:t}}},L=o(89);const _=(0,L.Z)(C,[["render",v]]);var y=_,D=(0,a.aZ)({name:"PureCard",props:{book:Object},components:{LazyImage:y}});const I=(0,L.Z)(D,[["render",p],["__scopeId","data-v-46b28748"]]);var M=I,Z=o(7687),P=o(6541),R=o(8521),z=(0,a.aZ)({name:"ListView",setup(){(0,P.CQ)();const{toDetailPage:t}=(0,R.Fb)(),e=e=>{(0,P.xP)(e);const o=e["@id"].replace("/books/","");t(o)};return{observer:P.Pi,canLoadMore:P.DK,loadMore:P.nR,bookList:P.ZN,page:P.Md,getMoreBooks:P.cB,viewDetail:e}},components:{Card:M,PrimaryButton:Z.Z}});const B=(0,L.Z)(z,[["render",l],["__scopeId","data-v-2afb4d8e"]]);var O=B}}]);
//# sourceMappingURL=159.b5ee5c5d.js.map