{"version":3,"file":"js/245.1a8313a3.js","mappings":"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","sources":["webpack://front/./src/views/ListView.vue","webpack://front/./src/components/Card.vue?a708","webpack://front/./src/components/LazyImage.vue","webpack://front/./src/components/LazyImage.vue?fe3e","webpack://front/./src/components/Card.vue?9d3e","webpack://front/./src/components/Card.vue","webpack://front/./src/views/ListView.vue?c025"],"sourcesContent":["<template>\n  <div class=\"list\">\n    <div class=\"book-list\">\n      <Card v-for=\"book in bookList\" :key=\"book.isbn\" :book=\"book\" @click=\"viewDetail(book)\"></Card>\n    </div>\n    <div class=\"load-more\" ref=\"loadMore\">\n      <PrimaryButton type=\"primary\" @click=\"getMoreBooks\">LOAD MORE</PrimaryButton>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {defineComponent} from 'vue'\nimport Card from '@/components/Card.vue'\nimport PrimaryButton from '@/components/PrimaryButton.vue'\nimport {page, bookList, setSingleBook, observer, loadMore, useBook, getMoreBooks} from './useBook'\n\nexport default defineComponent({\n  name: 'ListView',\n  setup () {\n    useBook()\n    return {observer, loadMore, bookList, page}\n  },\n  components: {\n    Card,\n    PrimaryButton\n  },\n  methods: {\n    getMoreBooks,\n    viewDetail (book) {\n      setSingleBook(book)\n      // go to detail page\n      this.$router.push({name: 'detail', params: {id: book['@id'].replace('/books/', '')}})\n    }\n  }\n})\n</script>\n\n<style scoped>\n.book-list {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 30px;\n  padding: 30px;\n  justify-content: center;\n}\n\n.load-more {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 30px;\n}\n</style>\n","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-46b28748\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"card\" }\nconst _hoisted_2 = { class: \"info\" }\nconst _hoisted_3 = [\"title\"]\nconst _hoisted_4 = [\"title\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_LazyImage = _resolveComponent(\"LazyImage\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_LazyImage, {\n      isbn: _ctx.book.isbn\n    }, null, 8, [\"isbn\"]),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"h3\", {\n        class: \"title\",\n        title: _ctx.book.title\n      }, _toDisplayString(_ctx.book.title), 9, _hoisted_3),\n      _createElementVNode(\"h4\", {\n        class: \"author\",\n        title: _ctx.book.author\n      }, _toDisplayString(_ctx.book.author), 9, _hoisted_4)\n    ])\n  ]))\n}","<template>\n  <img ref=\"imageRef\" src=\"https://fakeimg.pl/800x600/\"\n       :data-src=\"`https://picsum.photos/800/600/?random=${ isbn }`\" alt=\"圖片\">\n</template>\n\n<script>\nimport {onBeforeUnmount, onMounted, ref} from 'vue'\n\nconst imgObserver = new IntersectionObserver(entries => {\n  entries.forEach(entry => {\n    // Each entry describes an intersection change for one observed\n    // target element:\n    //   entry.boundingClientRect\n    //   entry.intersectionRatio\n    //   entry.intersectionRect\n    //   entry.isIntersecting\n    //   entry.rootBounds\n    //   entry.target\n    //   entry.time\n    if (entry.isIntersecting === true) {\n      // console.log('image isIntersecting')\n      entry.target.src = entry.target.dataset.src\n    }\n    if (entry.isIntersecting === false) {\n      // console.log('image is out of Intersecting')\n      // entry.target.src = 'https://fakeimg.pl/800x600/'\n    }\n  })\n})\n\nconst useImage = (imageRef) => {\n  onMounted(() => {\n    // 開始觀察\n    imgObserver.observe(imageRef.value)\n  })\n\n  onBeforeUnmount(() => {\n    // 停止觀察\n    imgObserver.unobserve(imageRef.value)\n  })\n  return imgObserver\n}\n\nexport default {\n  name: 'LazyImage',\n  props: {\n    isbn: String\n  },\n  setup () {\n    const imageRef = ref(null)\n\n    useImage(imageRef)\n    return {imageRef}\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import { render } from \"./LazyImage.vue?vue&type=template&id=0b2bf25c\"\nimport script from \"./LazyImage.vue?vue&type=script&lang=js\"\nexport * from \"./LazyImage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/istaging-interview/istaging-interview/front/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport {defineComponent} from 'vue'\nimport LazyImage from '@/components/LazyImage.vue'\n\nexport default defineComponent({\n  name: 'PureCard',\n  props: {\n    book: Object\n  },\n  components: {\n    LazyImage\n  }\n})\n","import { render } from \"./Card.vue?vue&type=template&id=46b28748&scoped=true&ts=true\"\nimport script from \"./Card.vue?vue&type=script&lang=ts\"\nexport * from \"./Card.vue?vue&type=script&lang=ts\"\n\nimport \"./Card.vue?vue&type=style&index=0&id=46b28748&scoped=true&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/istaging-interview/istaging-interview/front/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-46b28748\"]])\n\nexport default __exports__","import { render } from \"./ListView.vue?vue&type=template&id=0a806881&scoped=true\"\nimport script from \"./ListView.vue?vue&type=script&lang=js\"\nexport * from \"./ListView.vue?vue&type=script&lang=js\"\n\nimport \"./ListView.vue?vue&type=style&index=0&id=0a806881&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/istaging-interview/istaging-interview/front/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0a806881\"]])\n\nexport default __exports__"],"names":["class","ref","_createElementBlock","_createElementVNode","_Fragment","_renderList","_ctx","book","_createBlock","_component_Card","key","isbn","onClick","_createVNode","_component_PrimaryButton","type","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","render","_cache","$props","$setup","$data","$options","_component_LazyImage","_resolveComponent","_openBlock","title","_toDisplayString","author","src","alt","imgObserver","IntersectionObserver","entries","forEach","entry","isIntersecting","target","dataset","useImage","imageRef","onMounted","observe","value","onBeforeUnmount","unobserve","name","props","String","setup","__exports__","defineComponent","Object","components","LazyImage","useBook","observer","loadMore","bookList","page","Card","PrimaryButton","methods","getMoreBooks","viewDetail","setSingleBook","this","$router","push","params","id","replace"],"sourceRoot":""}